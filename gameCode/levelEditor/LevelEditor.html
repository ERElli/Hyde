<html>
<head>
    <meta charset="utf-8"/>
	<link rel="stylesheet" type="text/css" href="LevelEditorStyling.css">
	<!-- <script src="jquery-3.3.1.min.js"></script> -->

</head>
<body>
	<div id ="container" style="display:none; "></div>
	<div id ="levelMaker" style="display:none; width:500px; height:40px; position:absolute; top:700px; left:10;";>
		<form action ="#" id="form" onsubmit="map.convertToString()">
			Level Name: <input type="text" id="levelName"><br>
			<input type="submit" value="Submit">
		</form>
    <p id="newLevelName"> Level </p>
    <button id="button1"> Save </button>
	</div>


 	<div id="enemiesDropdown" >
		<button onclick="typeTapped('enemies')" class="enemiesbtn"></button>
		<div id="enemies" class="enemies-content" >
			<button style="background-image: url(../../images/enemy1Drop.png)" onclick="enemyTapped('Basic Enemy')" class="enemy1btn"></button>
			<button style="background-image: url(../../images/enemy2Drop.png)" onclick="enemyTapped('Flying Enemy')" class="enemy2btn"></button>
			<button style="background-image: url(../../images/enemy3Drop.png)" onclick="enemyTapped('Tank Enemy')" class="enemy3btn"></button>
		</div>
	</div>

	<div class="musicDropdown" >
		<button onclick="typeTapped('music')" class="musicbtn"></button>
		<div id="music" class="music-content" >
			<button style="background-image: url(../../images/music1Drop.png)" onclick="self.music1Tapped()" class="music1btn"></button>
			<button style="background-image: url(../../images/music2Drop.png)" onclick="self.music2Tapped()" class="music2btn"></button>
			<button style="background-image: url(../../images/music3Drop.png)" onclick="self.music3Tapped()" class="music3btn"></button>
		</div>
	</div>

	<div class="backgroundDropdown" >
		<button onclick="typeTapped('backgrounds')" class="backgroundbtn"></button>
		<div id="backgrounds" class="background-content" >
			<button style="background-image: url(../../images/world1Drop.png)" onclick="worldTapped('world1')" class="world1btn"></button>
			<button style="background-image: url(../../images/world2Drop.png)" onclick="worldTapped('world2')" class="world2btn"></button>
			<button style="background-image: url(../../images/world3Drop.png)" onclick="worldTapped('world3')" class="world3btn"></button>
	  	</div>
	</div>

	<div class="checkpointDropdown" >
		<button onclick="typeTapped('checkpoints')" class="checkpointbtn"></button>
		<div id="checkpoints" class="checkpoint-content" >
			<button style="background-image: url(../images/checkpointDrop.png)" onclick="checkpointTapped('standard checkpoint')" class="checkpoint1btn"></button>
			<button style="background-image: url(../images/checkpointFinishDrop.png)" onclick="checkpointTapped('final checkpoint')" class="checkpoint2btn"></button>
		</div>
	</div>

	<div class="characterDropdown" >
		<button onclick="typeTapped('character')" class="characterbtn"></button>
		<div id="characterDropdown" class="character-content" >
			<a href="#World1">World 1</a>
			<a href="#World2">World 2</a>
			<a href="#World3">World 3</a>
		</div>
	</div>

	<div class="terrainDropdown" >
		<button onclick="typeTapped('terrains')" class="terrainbtn"></button>
		<div id="terrains" class="terrain-content" >
			<button style="background-image: url(../images/1x1Drop.png)" onclick="terrainbtnTapped('1x1')" class="terrain1btn"></button>
			<button style="background-image: url(../images/1x1Drop.png)" onclick="terrainbtnTapped('1x1Breakable')" class="terrain2btn"></button>
			<button style="background-image: url(../images/3x2Drop.png)" onclick="terrainbtnTapped('3x2')" class="terrain3btn"></button>
			<button style="background-image: url(../images/3x2BDrop.png)" onclick="terrainbtnTapped('3x2Breakable')" class="terrain4btn"></button>
			<button style="background-image: url(../images/3x4Drop.png)" onclick="terrainbtnTapped('3x4')" class="terrain5btn"></button>
			<button style="background-image: url(../images/3x4BDrop.png)" onclick="terrainbtnTapped('3x4Breakable')" class="terrain6btn"></button>
			<button style="background-image: url(../images/3x6Drop.png)" onclick="terrainbtnTapped('3x6')" class="terrain7btn"></button>
			<button style="background-image: url(../images/3x6BDrop.png)" onclick="terrainbtnTapped('3x6Breakable')" class="terrain8btn"></button>
			<button style="background-image: url(../images/1x6BDrop.png)" onclick="terrainbtnTapped('1x6Breakable')" class="terrain9btn"></button>
		</div>
	</div>

	<div class="weaponDropdown">
		<button onclick="typeTapped('weapons')" class="weaponbtn"></button>
  		<div id="weapons" class="weapon-content" >
			<button style="background-image: url(../../images/pistolDrop.png)" onclick="weaponTapped('pisol')" class="pistolbtn"></button>
			<button style="background-image: url(../../images/assaultDrop.png)" onclick="weaponTapped('assault')" class="assaultbtn"></button>
			<button style="background-image: url(../../images/shottyDrop.png)" onclick="weaponTapped('shotgun')" class="shotgunbtn"></button>
			<button style="background-image: url(../../images/swordDrop.png)" onclick="weaponTapped('sword')" class="swordbtn"></button>
   		</div>
	</div>

  <div id="levelMenu"  style="  padding-top:10%; padding-left:40%;height:500px; background-color: lightblue;" >
    Level Name: <input id="levelNameField" type="text"></input><br><br>
    <br><br>
    Choose Width (ex: 1200): <input id="widthValue" type="text"></input><br><br>
      <br><br>
    <button id="levelButton">Go to Level Editor</button>
	</div>
</body>


<script type="text/javascript" src="../client/interface/level.json"></script>
<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<!-- <script src="text/javascript" src="testLevel.js"></script> -->
<script type="text/javascript" src="Terrain.js"></script>
<script type="text/javascript" src="Map.js"></script>
<script type="text/javascript" src="EntityFactory.js"></script>
<script type="text/javascript" src="../client/engine/entity.js"></script>
<script type="text/javascript" src="../client/engine/enemy.js"></script>
<script type="text/javascript" src="../client/engine/weapon.js"></script>
<script type="text/javascript" src="../client/engine/player.js"></script>
<script type="text/javascript" src="../client/interface/GUI.js"></script>
<script type="text/javascript" src="../client/interface/Animation.js"></script>
<script type="text/javascript" src="../client/interface/images.js"></script>


<script>
var socket = io();
var level;
var newLevelName = document.getElementById("newLevelName");
var levelNameField = document.getElementById('levelNameField');
var widthValue = document.getElementById('widthValue');
var levelButton = document.getElementById('levelButton');

levelButton.onclick = function(){
  if (levelNameField.value ==="" ){
    alert("Please input a name for the level.");
  }
  else{

    socket.emit('newLevel',{width:widthValue.value,  level: levelNameField.value});
    container.style.display = 'block';
    levelMaker.style.display = 'block';
    enemiesDropdown.style.display = 'block';
    levelMenu.style.display = 'none';
    musicDropdown.style.display ='block';
    backgroundDropdown.style.display = 'block';
    checkpointDropdown.display = 'block';
    characterDropdown.display = 'block';
    terrainDropdown.display = 'block';
    weaponDropdown.display = 'block';

    //
  }
}


//newLevelName.innerHTML= "blue";

var button1 = document.getElementById("button1");

//request
 button1.onclick = function(){
       socket.emit('button', {level:levelNameField.value});
 }

//receive
 socket.on('result',function(res){
    console.log("result", JSON.parse(JSON.stringify(res)));
      location.href = "/client/interface/index.html";

 });

 socket.on('gee',function(res){

      //console.log("heeeeey ", JSON.stringify(res));
      newLevelName.innerHTML= "blue";

 });

 socket.on('loadIt', function(data){
   console.log("this is cool");
   let level = data;
   console.log("result"+ level);
   let levelObject = EntityFactory(level,true);
   //map = Map(levelObject.width,HEIGHT,TILE_WIDTH,TILE_HEIGHT);
   //console.log(levelObject);
   Update(level);
 });



//This will Receive the level objects and set them to the variable level
/*
socket.on('hey', function(data){
  let level = data;
  console.log("result"+ level);
  //let levelObject = EntityFactory(level,true);
  //map = Map(levelObject.width,HEIGHT,TILE_WIDTH,TILE_HEIGHT);
  //console.log(levelObject);
  Update(level);
});  */





var Update = function(level){
	// var l = level;
	 console.log("heeey"+JSON.stringify(level[0] ));
	// for(var i=0; i<l[0].enemies.length; i++){
		//console.log("heeey"+JSON.stringify(level[0].enemies) );
	// }
  // console.log("heeey"+level[0].enemies );
}

if (window.File && window.FileReader && window.FileList && window.Blob) {
  // alert("SUCCESS!");
} else {
  alert('The File APIs are not fully supported in this browser.');
}

//Initial values
var WIDTH = 1250*3;
var HEIGHT = 650*1;
var TILE_WIDTH = 50;
var TILE_HEIGHT = 50;
var rectWIDTH = 50;
var rectHEIGHT = 50;
var buttonStartingX = TILE_WIDTH*5.5;
var mouseLeft = false;
var mouseRight = false;
var offsetX = 0;
var offsetY = 0;
var fps = 60;
var framecount = 0;
var numClicks = 1;
var entity;
var pathToRoot = "../";
var Img = Img(pathToRoot);
var ani = Animation();
var pos;
var id;
var x;
var y;

// //Creating images
var backgroundImage = new Image();
backgroundImage.src = "../../images/worldTwoBackground.png";


//Initializing the map
var map = Map(WIDTH,HEIGHT,TILE_WIDTH,TILE_HEIGHT);
map.setBackgroundImage(backgroundImage.src);

// let levelObject = EntityFactory(levelString,true);
// console.log(levelObject);

/*
	Controls
*/
var controls = {
	left: false,
	up: false,
	right: false,
	down: false,
};

/*
	Keydown Listener
*/
window.addEventListener("keydown",function(e){
	switch(e.keyCode){
		case 37:
 			controls.left = true;
			e.preventDefault();
			break;
		case 38:
			controls.up = true;
			e.preventDefault();
			break;
		case 39:
			controls.right = true;
			e.preventDefault();
			break;
		case 40:
			controls.down = true;
			e.preventDefault();
			break;
	}
});

/*
	Keyup Listener
*/
window.addEventListener("keyup",function(e){
	switch(e.keyCode){
		case 37:
			controls.left = false;
			break;
		case 38:
			controls.up = false;
			break;
		case 39:
			controls.right = false;
			break;
		case 40:
			controls.down = false;
			break;
	}
	e.preventDefault();
});

/*
	Disabling right-click context menu
*/
document.oncontextmenu = function(mouse){
	mouse.preventDefault();
};

/*
	Performs pressed actions when controls are being pressed
*/
doPressedAction = function() {
	if(controls.left){
		gui.fg_ctx.translate(-offsetX,-offsetY);
		(offsetX===0)? offsetX = 0 : (offsetX += TILE_WIDTH);
		gui.fg_ctx.translate(offsetX,offsetY);
		gui.editorBackground(offsetX,offsetY,self.selectedBackground);
	}
	if(controls.right){
		gui.fg_ctx.translate(-offsetX,-offsetY);
		(offsetX===(gui.bg.width-WIDTH))? (offsetX = gui.bg.width-WIDTH) : offsetX -= TILE_WIDTH;
		gui.fg_ctx.translate(offsetX,offsetY);
		gui.editorBackground(offsetX,offsetY,self.selectedBackground);
	}
	if(controls.up){
		gui.fg_ctx.translate(-offsetX,-offsetY);
		(offsetY===0)? offsetY = 0 : (offsetY += TILE_HEIGHT);
		gui.fg_ctx.translate(offsetX,offsetY);
		gui.editorBackground(offsetX,offsetY,self.selectedBackground);
	}
	if(controls.down){
		gui.fg_ctx.translate(-offsetX,-offsetY);
		(offsetY===gui.bg.height-HEIGHT)? (offsetY = gui.bg.height-HEIGHT) : offsetY -= TILE_HEIGHT;
		gui.fg_ctx.translate(offsetX,offsetY);
		gui.editorBackground(offsetX,offsetY,self.selectedBackground);
	}
};

var entity;
//Drawing a preview of the object to be placed on the level
//and snapping the top right corner of the preview to the grid lines
snapToGrid  = function(canvas,mouse){
	var pos = getMousePosition(canvas,mouse);
	var prev_x = pos.x - (pos.x % TILE_HEIGHT);
	var prev_y = pos.y - (pos.y % TILE_WIDTH);

	entity = null;
	var tempID = 0;
	var previewImage = new Image();

	if(self.selectedButton === 'enemies'){
		switch(self.selectedEnemy){
			case "Basic Enemy":
				entity = BasicEnemy(tempID,prev_x,prev_y,0,0,Img.basicEnemy1,'red',null);
				break;
			case "Flying Enemy":
				entity = FlyingEnemy(tempID,prev_x,prev_y,0,0,Img.basicEnemy2,'red',null);
				break;
			case "Tank Enemy":
				entity = TankEnemy(tempID,prev_x,prev_y,0,0,Img.basicEnemy3,'red',null);
				break;
		}
		entity.draw(gui.ep_ctx,true);
	}
	else if(self.selectedButton === 'character'){
		entity = Player(tempID,prev_x,prev_y,0,0,Img.playerSmall,null,false);
		entity.draw(gui.ep_ctx,true);
	}
	else if(self.selectedButton === "checkpoints"){
		previewImage.src = "../../images/placeCheckpoint.png";
		gui.ep_ctx.drawImage(previewImage, prev_x, prev_y, TILE_WIDTH, TILE_HEIGHT);
	}
	else if(self.selectedButton === "music"){
		previewImage.src = "../../images/placeCheckpoint.png";
		gui.ep_ctx.drawImage(previewImage, prev_x, prev_y, TILE_WIDTH, TILE_HEIGHT);
	}
	else if(self.selectedButton === "terrains"){
		switch(self.selectedTerrain){
			case "1x1":
				entity = Terrain1x1(tempID,prev_x,prev_y);
				break;
			case "1x1Breakable":
				entity = Terrain1x1Breakable(tempID,prev_x,prev_y);
				break;
			case "3x2":
				entity = Terrain3x2(tempID,prev_x,prev_y);
				break;
			case "3x2Breakable":
				entity = Terrain3x2Breakable(tempID,prev_x,prev_y);
				break;
			case "3x4":
				entity = Terrain3x4(tempID,prev_x,prev_y);
				break;
			case "3x4Breakable":
				entity = Terrain3x4Breakable(tempID,prev_x,prev_y);
				break;
			case "3x6":
				entity = Terrain3x6(tempID,prev_x,prev_y);
				break;
			case "3x6Breakable":
				entity = Terrain3x6Breakable(tempID,prev_x,prev_y);
				break;
			case "1x6Breakable":
				entity = Terrain1x6Breakable(tempID,prev_x,prev_y);
				break;
		}
		entity.draw(gui.ep_ctx,true);
    }
	else {
		gui.ep_ctx.fillRect(x,y,TILE_WIDTH,TILE_HEIGHT);
  	}
};

//function to place entity on the map
putEntity = function() {
	var mouseBelowUpperBound = pos.x<gui.fg.width && pos.y<gui.fg.height+(2*TILE_HEIGHT);
	var mouseAboveLowerBound = pos.x>0 && pos.y>TILE_HEIGHT*2;

	var id = Math.random();
	if(mouseBelowUpperBound && mouseAboveLowerBound){
		if(((x+entity.width) <= WIDTH) && ((y+entity.height) <= HEIGHT)){
			if(self.selectedButton !== null){
				if(self.selectedButton === 'enemies'){
					if(self.selectedEnemy === 'Basic Enemy'){
						entity = BasicEnemy(id,x,y,0,0,Img.basicEnemy1,'red',null);
					} else if(self.selectedEnemy === "Flying Enemy"){
						entity = FlyingEnemy(id,x,y,0,0,Img.basicEnemy2,'red',null);
					} else if(self.selectedEnemy === "Tank Enemy"){
						entity = TankEnemy(id,x,y,0,0,Img.bearEnemy,'red',null);
					} else {
						console.log("enemy error");
					}
				}else if(self.selectedButton === 'character'){
					entity = Player(id,x,y,0,0,Img.playerSmall,null,false);
					console.log("PLAYER",entity);
				}else if(self.selectedButton === 'terrains'){
					if(self.selectedTerrain === "1x1"){
						entity = Terrain1x1(id,x,y);
					}else if(self.selectedTerrain === "1x1Breakable"){
						entity = Terrain1x1Breakable(id,x,y);
					}else if(self.selectedTerrain === "3x2"){
						entity = Terrain3x2(id, x, y);
					}else if(self.selectedTerrain === "3x2Breakable"){
						entity = Terrain3x2Breakable(id, x, y);
					}else if(self.selectedTerrain === "3x4"){
						entity = Terrain3x4(id, x, y);
					}else if(self.selectedTerrain === "3x4Breakable"){
						entity = Terrain3x4Breakable(id, x, y);
					}else if(self.selectedTerrain === "3x6"){
						entity = Terrain3x6(id, x, y);
              		}else if(self.selectedTerrain === "3x6Breakable"){
						entity = Terrain3x6Breakable(id, x, y);
					}else if(self.selectedTerrain === "1x6Breakable"){
						entity = Terrain1x6Breakable(id, x, y);
					}else{
						console.log("terrain problem");
					}
				}
				map.tryToPlaceEntity(entity);
			}else{
				console.log("No entity selected");
			}
		}
		else{
			console.log("Can not place object there");
		}
	}
};


deleteEntity = function() {
	var mouseBelowUpperBound = pos.x<gui.fg.width && pos.y<gui.fg.height+(2*TILE_HEIGHT);
	var mouseAboveLowerBound = pos.x>0 && pos.y>TILE_HEIGHT*2;
	if(mouseBelowUpperBound && mouseAboveLowerBound){
		map.removeEntity(x,y);
	}
};


update = function() {
	gui.fg_ctx.clearRect(0,0,WIDTH,HEIGHT);
	map.update();
	doPressedAction();
	framecount++;
};

// Calling update 60 times a second
setInterval(update, 1000/fps);


getMousePosition = function(canvas,mouse){
	var rect = canvas.getBoundingClientRect();
	return {
		x: mouse.clientX - rect.left,
		y: mouse.clientY - rect.top,
	};
};

var finalPos;
var pathStart;
var pathEnd;
var flyingAmplitude;
doMouseAction = function(){
	if(mouseLeft){
		// if(self.selectedEnemy ==='Flying Enemy'){
		// 	if(numClicks===1){
		// 		console.log("1st CLICK",numClicks);
		// 		finalPos = pos;
		// 		self.selectedButton = null;
		// 		console.log("FINAL POS",finalPos);
		// 	}
		// 	if(numClicks===2){
		// 		console.log("2nd CLICK",numClicks);
		// 		pathStart = pos;
		// 		console.log("PATH START",pathStart);
		// 	}
		// 	if(numClicks===3){
		// 		console.log("3rd CLICK",numClicks);
		// 		pathEnd = pos;
		// 		console.log("PATH END",pathEnd);
		// 		numClicks = 0;
		// 		self.selectedButton = "enemies";
		// 	}
		// 	numClicks++;
		// } else {
			// putEntity();
		// }
		putEntity();
	} else if(mouseRight){
		deleteEntity();
	}
}



document.onmousemove = function(mouse){
	pos = getMousePosition(gui.bg,mouse);
	x = pos.x - (pos.x % TILE_HEIGHT) - offsetX;
	y = pos.y - (pos.y % TILE_WIDTH) - offsetY;

	var mouseBelowUpperBound = pos.x<WIDTH && pos.y<HEIGHT;
	var mouseAboveLowerBound = pos.x>0 && pos.y>TILE_HEIGHT*2;

	if(mouseBelowUpperBound && mouseAboveLowerBound){
		gui.ep_ctx.clearRect(0,0,WIDTH,HEIGHT);
		snapToGrid(ep,mouse);
		doMouseAction();
	}
};


document.onmousedown = function(mouse){
	(mouse.which===1) ? (mouseLeft = true) : (mouseRight = true);

	doMouseAction();
	// map.makeLevel();
	pos = getMousePosition(bg,mouse);
	x = pos.x - (pos.x % TILE_HEIGHT) - offsetX;
	y = pos.y - (pos.y % TILE_WIDTH) - offsetY;
};

document.onmouseup = function(mouse){
	(mouse.which===1) ? (mouseLeft = false) : (mouseRight = false);
};


//Drawing Grid lines
drawGrid = function(){
	gui.gr_ctx.globalAlpha = 0.05;
	gui.gr_ctx.lineWidth = 2;
	gui.gr_ctx.strokeStyle = "#515151";

	//Drawing vertical lines
	for(x=TILE_WIDTH; x<=WIDTH*2; x+=TILE_WIDTH){
		gui.gr_ctx.moveTo(x,TILE_HEIGHT*2);	//The first 2 rows of the canvas are used by buttons
		gui.gr_ctx.lineTo(x,HEIGHT);
		gui.gr_ctx.stroke();
	}

	//Drawing horizontal lines
	for(y=TILE_HEIGHT*2; y<=HEIGHT*2; y+=TILE_HEIGHT){
		gui.gr_ctx.moveTo(0,y);
		gui.gr_ctx.lineTo(WIDTH,y);
		gui.gr_ctx.stroke();
	}

	gui.gr_ctx.globalAlpha = 1;
};


init = function() {
	container = document.getElementById("container");
	gui = GUI(container);
	gui.createCanvas(1250,650);
	drawGrid();
};

init();

/***********************

DROP DOWN FUNCTIONALITY

***********************/

self.selectedButton = null;
self.selectedEnemy = null;
self.selectedBackground = null;
self.selectedCheckpoint = null;
self.selectedCharacter = null;
self.selectedTerrain = null;
self.selectedWeapon = null;

/*
	Toggles style.display of an element
*/
function toggleDisplay(element) {
	if(element.style.display != 'block'){
		element.style.display = 'block';
	} else {
		element.style.display = 'none';
	}
}

/*
	Detects what button is pressed and toggles the style.display of the corresponding
	dropdown menu
*/
function typeTapped(id){
	console.log(id);
	self.selectedButton = id;
	if(id !== 'character'){
		let element = document.getElementById(id);
		toggleDisplay(element);
	}
}

/*************************
	Enemies
**************************/

/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
// function enemiesTapped() {
//     self.selectedButton = "enemies";
//     let element = document.getElementById("myEnemiesDropdown");
//     toggleDisplay(element);
// }

// Close the enemies dropdown if the user clicks outside of it
// document.onclick = function(event) {
// 	var divToHide = document.getElementById("myEnemiesDropdown");
// 	if (!event.target.matches('.enemiesbtn')) {
// 		if(divToHide.style.display === 'block'){
// 			divToHide.style.display = 'none';
// 		}
// 	}
// }


self.enemyTapped = function(id){
	self.selectedEnemy = id;
	console.log(self.selectedEnemy);
}

/*************************
	Music
**************************/

/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
// function musicTapped() {
//     self.selectedButton = "music";
//     var element = document.getElementById("myMusicDropdown");
//     toggleDisplay(element);
// }

// Close the enemies dropdown if the user clicks outside of it
document.onclick = function(event) {
  	var divToHide = document.getElementById("myMusicDropdown");
	if (!event.target.matches('.musicbtn')) {
		if(divToHide.style.display === 'block'){
			divToHide.style.display = 'none';
		}
	}
}

self.music1Tapped = function(){
  self.selectedMusic = "music1";
}

self.music2Tapped = function(){
  self.selectedMusic = "music2";
}

self.music3Tapped = function(){
  self.selectedMusic = "music3";
}

/*************************
	Background
**************************/

/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
// function backgroundTapped() {
// 	self.selectedButton = "background"
// 	var element = document.getElementById("myBackgroundDropdown");
//     toggleDisplay(element);
// }

// Close the enemies dropdown if the user clicks outside of it
document.onclick = function(event) {
	let divToHide = document.getElementById("backgrounds");
	if (!event.target.matches('.backgroundbtn')) {
		if(divToHide.style.display === 'block'){
			divToHide.style.display = 'none';
		}
	}
}

self.worldTapped = function(id){
	self.selectedBackground = id;
	console.log(self.selectedBackground);
	gui.editorBackground(offsetX,offsetY,self.selectedBackground);
}

/*************************
	Checkpoint
**************************/

/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
function checkpointTapped(id) {
	self.selectedCheckpoint = id;
	console.log(id);
}

window.onclick = function(event) {
	var divToHide = document.getElementById("checkpointDropdown");
	if (!event.target.matches('.checkpointbtn')) {
		if(divToHide.style.display === 'block'){
			divToHide.style.display = 'none';
		}
	}
}

/*************************
	Character
**************************/

/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
function characterTapped() {
	self.selectedButton = "character";
	var element = document.getElementById("characterDropdown");
	toggleDisplay(element);
}

window.onclick = function(event) {
	var divToHide = document.getElementById("characterDropdown");
	if (!event.target.matches('.characterbtn')) {
		if(divToHide.style.display === 'block'){
			divToHide.style.display = 'none';
		}
	}
}

/*************************
	Terrain
**************************/

/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
// function terrainTapped() {
// 	self.selectedButton = "terrain";
// 	var element = document.getElementById("myTerrainDropdown");
// 	toggleDisplay(element);
// }

// Close the Terrain dropdown if the user clicks outside of it
window.onclick = function(event) {
	var divToHide = document.getElementById("myTerrainDropdown");
	if (!event.target.matches('.terrainbtn')) {
		if(divToHide.style.display === 'block'){
			divToHide.style.display = 'none';
		}
	}
}

function terrainbtnTapped(id){
	console.log(id);
	self.selectedTerrain = id;
}

/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
function weaponTapped() {
	self.selectedButton = "weapon";
	var element = document.getElementById("myWeaponDropdown");
	toggleDisplay(element);
}

// Close the weapon dropdown if the user clicks outside of it
window.onclick = function(event) {
	var divToHide = document.getElementById("weapons");
	if (!event.target.matches('.weaponbtn')) {
		if(divToHide.style.display === 'block'){
			divToHide.style.display = 'none';
		}
	}
}

self.weaponTapped = function(id){
	self.selectedWeapon = id;
}

</script>
</html>
