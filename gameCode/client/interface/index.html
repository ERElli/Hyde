<html>
	<body>
		<br>
		<br>
		<div id="container">

		<div id="results" style="positions:absolute; left: 511px;">
			<table style="border:1px"></table>
		</div>
	</body>
	<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
		<script type="text/javascript" src="../engine/main.js"></script>
		<script type="text/javascript" src="../engine/entity.js"></script>
		<script type="text/javascript" src="../engine/player.js"></script>
		<script type="text/javascript" src="../engine/enemy.js"></script>
		<script type="text/javascript" src="../engine/weapon.js"></script>
		<script type="text/javascript" src="../engine/usable.js"></script>
		<script type="text/javascript" src="../../levelEditor/Terrain.js"></script>
		<script type="text/javascript" src="images.js"></script>
		<script type="text/javascript" src="GUI.js"></script>
		<script type="text/javascript" src="Animation.js"></script>

		<script>

		var socket = io();

		//call the socket to get the level objects from database
		var  getLevelObjects = function() {
		 socket.emit('getLevelObject', {levelName: "level 1"});
		};

		getLevelObjects();

		//the socket receive the level objects from the database
		socket.on('receiveLevelObjects',function(data){
			//level objects should be in data, right now they are logged in console
	    console.log( data);
	  });
	  

		let gameWidth=2000

		// construct the gui with the container and the map
		var gui;
		var ani=Animation();
		var Img=Img("../../");
		var HEIGHT=500;
		var WIDTH=1250;

		//id, x, y, vx, vy, width, height, img, color, ownerID
		p= new Pistol("w1", 150, 450-25, 0, 0, 50, 50,"pistol_image",null, 'player');



		//id, x, y, vx, vy, img, weapon, isBig
		e = new Player("player", 150, 400-25, 0, 0, "Img.player", p, false);


		pickUp = new WeaponPickUp(Math.random(), 600, 350-25, "sword", e);
		console.log(pickUp.x)

		//id, x, y, vx, vy, img, color, target

		enemy2 = new FlyingEnemy("enemy2", 200, 125, 0, 0, "Img.basicEnemy", null, e);
		enemy3 = new FlyingEnemy("enemy3", 150, 125, 0, 0, "Img.basicEnemy", null, e)
		enemy4 = new FlyingEnemy("enemy4", 150, 75, 0, 0, "Img.basicEnemy", null, e)
		enemy5 = new FlyingEnemy("enemy5", 150, 100, 0, 0, "Img.basicEnemy", null, e)

		var terrain = {};
		for (i = 0; i < 10; i++) {
			id = Math.random();
			terrain[id] = new Terrain1x1(id, i*50, 400);
		}

		for (i = 10; i < 50; i++) {

			id = Math.random();
			terrain[id] = new Terrain1x1(id, i*50, 200);
		}

		//-----------
		init = function() {
			// get a reference to the container div in the page
			var container = document.getElementById("container");
			document.getElementById("results").position = 'absolute';
			document.getElementById("results").style.left = container.width + 20;
			gui=GUI(container);
			gui.createCanvas(WIDTH,HEIGHT);
		}
		//Creates background and foreground Canvases
		init();
		startGame({'player':e, 'enemies':{'enemy2':enemy2}, 'terrain':terrain, 'pickUps':{'p1':pickUp}}); //'enemy1':enemy,'enemy2':enemy2}});// 'enemy3':enemy3, 'enemy4':enemy4}});


		</script>
</html>
