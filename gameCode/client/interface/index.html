<html>
	<body>
		<br>
		<br>
		<div id="container">

		<div id="results" style="positions:absolute; left: 511px;">
			<table style="border:1px"></table>
		</div>
	</body>
	<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
		<script type="text/javascript" src="../engine/main.js"></script>
		<script type="text/javascript" src="../engine/entity.js"></script>
		<script type="text/javascript" src="../engine/player.js"></script>
		<script type="text/javascript" src="../engine/enemy.js"></script>
		<script type="text/javascript" src="../engine/weapon.js"></script>
		<script type="text/javascript" src="../engine/usable.js"></script>
		
		<script type="text/javascript" src="../../levelEditor/Terrain.js"></script>
		<script type="text/javascript" src="images.js"></script>
		<script type="text/javascript" src="GUI.js"></script>
		<script type="text/javascript" src="Animation.js"></script>

		<script>

		var socket = io();

		//call the socket to get the level objects from database
		var  getLevelObjects = function() {
		 socket.emit('getLevelObject', {levelName: "level 1"});
		};

		getLevelObjects();

		//the socket receive the level objects from the database
		socket.on('receiveLevelObjects',function(data){
			//level objects should be in data, right now they are logged in console
	    console.log( data);
	  });
	  

		let gameWidth=2000

		// construct the gui with the container and the map
		var gui;
		var ani=Animation();
		var Img=Img("../../");
		var HEIGHT=500;
		var WIDTH=1250;

		
		//-----------
		init = function() {
			// get a reference to the container div in the page
			var container = document.getElementById("container");
			document.getElementById("results").position = 'absolute';
			document.getElementById("results").style.left = container.width + 20;
			gui=GUI(container);
			gui.createCanvas(WIDTH,HEIGHT);
		}
		//Creates background and foreground Canvases
		init();

		
		
		//console.log(mydata);
		
		var level = {}
		
		for (var map in data) {
			level.map = {}
		}
		
		for (var thing in data['player']) {
			p = data['player'][thing]
		}
		
		level['player'] = new Player(p.id, p.x, p.y, p.vx, p.vy, p.img, new Pistol(Math.random(), p.x, p.y, p.vx, p.vy, 50, 50,"pistol_image",null, p.id), p.isBig);
		
		
		startGame(level);


		</script>
</html>
